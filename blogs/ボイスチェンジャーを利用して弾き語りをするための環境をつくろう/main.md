# ボイスチェンジャーを利用して弾き語りをするための環境をつくろう

ボイスチェンジャーの用途の一つは会話でしょうが，もう一つの主要な用途は歌唱ではないでしょうか．

歌唱にあたっては，伴奏の類が欲しくなります．であれば，楽器の演奏と歌唱の両方をサポートできれば，この需要は満たせそうです．

本稿では，ボイスチェンジャーを使った弾き語り環境の一例を説明します．

## 前提：遅延をなくそう

弾き語りにおいて致命的な問題となるのがループバックの遅延です．

まず，ループバックを聞くことは避けられません．音高や発声を調整するのに必要だからです．

しかし，弾き語りでは，演奏と歌唱のタイミングを合わせなければいけませんから，遅延は許容できません．タイミングが合わせづらいだけでなく，リズムに乗ることも困難になります．

したがって，この記事で紹介する環境を構築する前に，まずは皆さんの環境における音声の遅延を弾き語りに支障ない程度まで軽減してください．

**本稿では，遅延軽減の方法については説明しません．** 遅延が十分に小さい環境がすでにあるという前提で話を進めます．
（手が空いたら別途記事にします．）

## 構築例 1：MIDI キーボードで演奏する場合

楽器として MIDI キーボードを利用する場合，MIDI 入力信号（「ドの音をこの強さで弾いた」みたいな信号）を音声信号に変換する必要があります．この変換において，VST インストゥルメント（VSTi）という VST プラグインの一形式が利用できます．

これは，VST プラグインと併せて，Cantabile（VST ホスト）で利用可能です．MIDI 入力ポートを適切に設定すれば，あとはプラグインの設定のみで事が済みます．

私の環境は以下のようになっています．

![私のCantabileの設定](images/my_cantabile_settings.png)

図のように，Cantabile の中で 2 つの処理系統が並行して動いています．上の経路が楽器演奏のもの，下の経路が声のものです．

- **楽器の系統:** MIDI 信号を受け取り，VSTi がその情報に基づいてピアノの音を生成します．図中の 「LABS 1」 が楽器音源です．続くものは単なる音声の加工のためのプラグインです．
- **声の系統:** マイクからの音声を受け取り，ボイスチェンジャーやその他処理を通して声にエフェクトをかけます．

最終的には，これら 2 つの音が混ざってに出力されます．

以下にデモを示します．

<https://youtu.be/3RHPSagwvEY>

この方法では，演奏の処理も歌唱の処理も VST ホスト内で完結します．簡便な方法です．

しかし，音声の個別出力ができません．個別出力をしたい場合，[構築例 2: ギターやベースを利用する場合]の構成を利用してください．

### 応用：ピッチシフターでキーを変更する

VSTi で出力された音源はただの音声信号ですから，VST プラグインで加工できます．

たとえば，基準周波数 A4 の音を 440Hz から 432Hz に下げると印象が変わりますが，同様のことがこの環境でもできます．

上述の私の構成における「kHz Pitch Shifter 1」がその処理を担当しています．

利用した場合の変化を以下に示します．

<https://youtu.be/JvE8mXQPVVY>

## 構築例 2: ギターやベースを利用する場合

ギターやベースを利用する場合，音は音声信号として入力することになると思います．

この場合，Cantabile に取り込むことができますが，ボイスチェンジャー用に構築した経路を通ることになるので，音に望まぬ加工が入ります．一方で，エフェクターを無効にした場合，声にボイスチェンジャーをかけることができなくなります．

つまり，Cantabile 単体では，ボイスチェンジャーを利用した弾き語りは不可能です．

これは，別のチャンネルを使うことで解決します．

演奏の音声に加工が不要な場合，Voicemeeter の楽器音声を受け付けるチャンネルから最終出力チャンネルに直接音声を流せば問題は解決します．

![ギターの弾き語り？](sounds/demo_raw.mp3)

演奏の音声に加工が必要な場合，演奏音声の加工用のホストアプリを別で立ち上げます．私は Cantabile と Studio One の両方を利用しています．（Cantabile を二つ起動できれば良かったのですが，やり方が分かりませんでした）

Cantabile には B2 を，Studio One には B3 を参照させ，どちらも VIRTUAL INPUTS Voicemeeter AUX に出力します．VIRTUAL INPUTS Voicemeeter AUX に流れた音声を B1 に出力すれば，相手には演奏と歌唱の両方が聞こえます．

![音声経路のイメージ](images/voicemeeter_rout_for_music.png)

![エフェクトをかけたギターの弾き語り？](sounds/demo_effected.mp3)

また，それぞれの出力先を別のものにすれば，演奏と歌唱を分けて管理することができます．たとえば，Cantabile の出力を VIRTUAL INPUTS Voicemeeter AUX に，Studio One の演奏を VIRTUAL INPUTS VAIO3 に割り当てれば，それぞれの出力先や音声を個別に調整できます．

この方法は面倒で重たいですが，柔軟です．

## まとめ

この環境を構築できれば，心のゆくままに電波ソングが歌えますね．一緒ににゃんにゃんしていきましょう．
